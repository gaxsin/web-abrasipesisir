<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Sistem Peringatan Dini Abrasi Pesisir</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>ðŸŒŠ Sistem Peringatan Dini Abrasi Pesisir</h1>

  <!-- Banner Notifikasi -->
  <div id="banner-notif" style="display:none; background-color:#ff6961; color:white; text-align:center; padding:15px; font-weight:bold;">
    âš  Risiko Abrasi Tinggi! Harap waspada!
  </div>

  <div class="card">
    <label>Tinggi Gelombang (m)</label>
    <input type="number" id="gelombang" step="0.1">

    <label>Kecepatan Arus (m/s)</label>
    <input type="number" id="arus" step="0.1">

    <label>Pasang Surut (m)</label>
    <input type="number" id="pasut" step="0.1">

    <button onclick="hitungRisiko()">Cek Risiko Abrasi</button>
  </div>

  <div id="hasil" class="status"></div>

  <button onclick="mintaIzinNotifikasi()">Aktifkan Notifikasi</button>

  <div id="map" style="height:400px;"></div>

  <script src="script.js"></script>

  <!-- OneSignal SDK -->
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
  <script>
    window.OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({
        appId: "816b5b26-e157-4c9a-8949-02db1b526471", // Ganti dengan App ID OneSignal kamu
        notifyButton: {
          enable: true // tombol subscribe otomatis muncul
        },
        welcomeNotification: {
          "title": "Fadil's Org App",
          "message": "Thanks for subscribing!"
        }
      });
    });

    // Fungsi minta izin manual dari tombol
    function mintaIzinNotifikasi() {
      OneSignal.push(function() {
        OneSignal.showSlidedownPrompt(); // memunculkan prompt izin push
      });
    }
  </script>

</body>
</html>

