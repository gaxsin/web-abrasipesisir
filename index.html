<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Sistem Peringatan Dini Abrasi Pesisir</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
<h1>ðŸŒŠ Sistem Peringatan Dini Abrasi Pesisir</h1>

<div class="card">
  <label>Tinggi Gelombang (m)</label>
  <input type="number" id="gelombang" step="0.1">

  <label>Kecepatan Arus (m/s)</label>
  <input type="number" id="arus" step="0.1">

  <label>Pasang Surut (m)</label>
  <input type="number" id="pasut" step="0.1">

  <button onclick="cekManual()">Cek Risiko Manual</button>
</div>

<div id="map" style="height:400px;"></div>

<!-- OneSignal SDK -->
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
window.OneSignal = window.OneSignal || [];
OneSignal.push(function() {
  OneSignal.init({
    appId: "YOUR_ONESIGNAL_APP_ID", // ganti dengan App ID OneSignal asli
    notifyButton: { enable: true },
    welcomeNotification: { title:"Fadil's Org App", message:"Terima kasih sudah subscribe!" }
  });
});

// Manual cek risiko (optional)
function cekManual() {
  let gel = parseFloat(document.getElementById("gelombang").value || 0);
  let arus = parseFloat(document.getElementById("arus").value || 0);
  let pasut = parseFloat(document.getElementById("pasut").value || 0);

  if(gel===0 && arus===0 && pasut===0){
    alert("Isi semua data untuk cek risiko");
    return;
  }

  if(gel>2 || arus>1.5 || pasut>1.5){
    alert("âš  Risiko Tinggi! Notifikasi akan dikirim ke subscriber.");
    // Kirim request ke backend
    fetch("https://YOUR_BACKEND_URL/send", {
      method:"POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ title:"âš  Risiko Abrasi Tinggi!", message:"Gelombang atau arus tinggi terdeteksi!" })
    });
  } else {
    alert("âœ… Risiko Rendah");
  }
}

// Leaflet map
var map = L.map('map').setView([-0.7893, 113.9213], 5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'Â© OpenStreetMap' }).addTo(map);
</script>
</body>
</html>
